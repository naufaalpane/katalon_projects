<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />

		<title>@Html.Toyota().Application.Alias - Login</title>
		<meta name="description" content="User login page" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

		<!-- bootstrap & fontawesome -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/fontawesome-free/css/all.min.css")">
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/fontawesome-free/css/all.min.css")">
		<!-- Ionicons -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/dist/css/ionicons.css")">
		<!-- daterange picker -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/daterangepicker/daterangepicker.css")">
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css")">
		<!-- iCheck for checkboxes and radio inputs -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/icheck-bootstrap/icheck-bootstrap.min.css")">
		<!-- Bootstrap Color Picker -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.min.css")">
		<!-- Tempusdominus Bbootstrap 4 -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css")">
		<!-- Select2 -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/select2/css/select2.min.css")">
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css")">
		<!-- Bootstrap4 Duallistbox -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap4-duallistbox/bootstrap-duallistbox.min.css")">
		<!-- overlayScrollbars -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/plugins/overlayScrollbars/css/OverlayScrollbars.min.css")">
		<!-- Theme style -->
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/dist/css/adminlte.css")">
		<link rel="stylesheet" href="@Url.Content("~/Content/Bootstrap4/dist/css/tdk4.css")">
		<!-- Google Font: Source Sans Pro -->
		<link href="@Url.Content("~/Content/Bootstrap4/fonts/sourcesanspro.css")" rel="stylesheet">
		<link href="@Url.Content("~/Content/Bootstrap4/fonts/leaguespartan.css")" rel="stylesheet">
        <style>
            .login-container
            {
                width: auto;
                max-width: 900px;
            }
            #carousel-login
            {
                max-width: 470px;
                margin: 0 auto;
            }
            #forgot-box, #signup-box
            {
                max-width: 375px;
                margin: 0 auto;
            }
            .login-main
            {
                padding-bottom: 36px !important;
                padding-top: 36px !important;
            }
            .logo-title
            {
                width: 32px;
            }
            .login-app
            {
				font-family: 'League Spartan Bold', arial;
            }
            
            #company-name
            {
                font-size: 12px;
                 margin-top: 0px;
            }
            
            /* footer login box */
            .login-box .toolbar
            {
               background: #f7f7f7 !important;
               border-top: 2px solid #bcbcbc;
            }
            
            /* no border on the login box */
           
            .light-login .widget-box.login-box
            {
                background-color: inherit !important;
            }
			.login-block{
				/*background: #DE6262;  /* fallback for old browsers */
				/*background: -webkit-linear-gradient(to bottom, #FFB88C, #DE6262);  /* Chrome 10-25, Safari 5.1-6 */
				/*background: linear-gradient(to bottom, #FFB88C, #DE6262); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
				float:left;
				width:100%;
				padding : 50px 0;
			}
			
            /* =============================== say: begin =============================== */

            .warn, .yell {
                background-color: #d15b47;
                color: #fff
            }

            .done {
                background-color: #629b58;
                color: #fff
            }

        /* ================================ say: end ================================ */
        </style>

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->

		<!--[if lt IE 9]-->
       <!-- REQUIRED SCRIPTS -->
		<!-- jQuery -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/jquery/jquery.min.js")"></script>
		<!-- Bootstrap -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap/js/bootstrap.bundle.min.js")"></script>
		<!-- overlayScrollbars -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/select2/js/select2.full.min.js")"></script>
		<!-- Bootstrap4 Duallistbox -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap4-duallistbox/jquery.bootstrap-duallistbox.min.js")"></script>
		<!-- InputMask -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/moment/moment.min.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/inputmask/min/jquery.inputmask.bundle.min.js")"></script>
		<!-- date-range-picker -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/daterangepicker/daterangepicker.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js")"></script>
		<!-- bootstrap color picker -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js")"></script>
		<!-- Tempusdominus Bootstrap 4 -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js")"></script>
		<!-- Bootstrap Switch -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap-switch/js/bootstrap-switch.min.js")"></script>
		<!-- AdminLTE App -->
		<script src="@Url.Content("~/Content/Bootstrap4/dist/js/adminlte.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/dist/js/jquery.cookie.js")"></script>
		<!-- OPTIONAL SCRIPTS -->
		

		<!-- PAGE PLUGINS -->
		<!-- jQuery Mapael -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/jquery-mousewheel/jquery.mousewheel.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/raphael/raphael.min.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/jquery-mapael/jquery.mapael.min.js")"></script>
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/jquery-mapael/maps/usa_states.min.js")"></script>
		<!-- ChartJS -->
		<script src="@Url.Content("~/Content/Bootstrap4/plugins/chart.js/Chart.min.js")"></script>
	</head>

	<body class="login-block light-login" id="ceklogin">
		<div>
			<div class="mb-3" style="text-align: center;">
				<div class="h-100 justify-content-center">
					<h1>
						<img src="@Url.Content("~/Content/Bootstrap4/img/app-logo.png")" class="logo-title" alt="ISTD Logo" />
						<span class="login-app text-red">@Html.Toyota().Application.Name</span>
					</h1>

					<span id="company-name">2020 &copy; @Html.Toyota().Application.OwnerName</span>
				</div>

				<div class="space-6"></div>
			</div>

			<div class="container h-100">
				<div class="row justify-content-center">
					<div class="col-md-10">
						<div class="card-group row">
							<div class="card p-4 col-md-5">
								<div class="card-body">
									
											<h3 class="text-green">
												<i class="fa fa-coffee green"></i>
												Login
											</h3>
											
											<div class="text-center" style="margin-bottom: 15px;">
												<hr id="hrsrc" style="margin:0;padding:0;">
											</div>
											<div class="space-6"></div>

											<form id="login-form" role="form" class="form" method="post">
                                                <fieldset>
                                                    <div class="input-group mb-3">
                                                        <input type="text" id="tfUsername" class="form-control" placeholder="Username">
                                                        <div class="input-group-append">
                                                            <div class="input-group-text">
                                                                <span class="fas fa-user"></span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="input-group mb-3">
                                                        <input type="password" id="tfPassword" class="form-control" placeholder="Password">
                                                        <div class="input-group-append">
                                                            <div class="input-group-text">
                                                                <span class="fas fa-lock"></span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-8">
                                                        <div class="icheck-primary">
                                                            <input type="checkbox" id="rememberme" name="remember">
                                                            <label for="rememberme">
                                                                Remember Me
                                                            </label>
                                                        </div>
                                                    </div>

                                                    <div class="col-12">
                                                        <button id="login-button" type="submit"  class="float-right btn btn-primary">
                                                            <i class="fas fa-key"></i>
                                                            <span class="text-lg">Login</span>
                                                        </button>

                                                    </div>

                                                    <div id="feedback">&nbsp;</div>
                                                    <div class="space-4"></div>
                                                </fieldset>
											</form>
								
								</div>
							</div>

							<div class="card text-white col-md-7">
                                @Html.Partial("_Carousel")
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>	
       @Html.Partial("_Agreement") 

		<!-- basic scripts -->
    @{
        string autolog = (string)ViewData["autologin"];
        string username = (string)ViewData["username"];
        string password = (string)ViewData["password"];
    }
		<!--[if !IE]> -->
		<script type="text/javascript">
		    window.jQuery || document.write("<script src='/Content/Bootstrap4/plugins/jquery/jquery.min.js'>" + "<" + "/script>");
		    if ('ontouchstart' in document.documentElement) document.write("<script src='/Content/Bootstrap4/plugins/jquery.mobile.custom.js'>" + "<" + "/script>");
		</script>
        <!--<script type="text/javascript" src="@Url.Content("~/Content/Bootstrap/js/bootstrap.js")"></script>-->
		<script type="text/javascript" src="@Url.Content("~/Content/Bootstrap4/plugins/bootstrap/js/bootstrap.bundle.min.js")"></script>
		<!-- inline scripts related to this page -->
		<script type="text/javascript">
            var autologin = '@autolog';
            var username = '@username';
            var password = '@password';

            $(document).ready(function () {
                $("#ceklogin").hide();

                if (autologin == 'yes') {
                     //popUpProgressShow();
                    //alert('tes')
                   // window.location.href = "@Html.Toyota().Page.GetActionUrl("/Logout")"
		            //alert('work')
		            var user = username
		            var pass = password
		            //alert(user +' '+ pass)
		            Callajaxlogin(user, pass)
		            //console.log(user + ' ' + pass)
		        }
		        else {
		            if (!window.location.hash) {
		                window.location = window.location + '#r';
		                location.reload();
		            }
		            $("#ceklogin").show()
		        }
            });


            function Callajaxlogin(user, pass)
            {
                say('Please Wait ...').with("tell").to("#feedback");
                $("#login-button").prop('disabled', true);
                $.ajax({
                    method: "POST",
                    url: "@Html.Toyota().Page.AjaxLoginActionUrl",
                    data:
                    {
                        username: user,
                        password: pass
                    },
                    success:
                        function (feedback) {
                            if (feedback == "true") {
                                say('Redirecting to Homepage.').with("done").to("#feedback");
                                $('#login-button').hide();
                                window.location.href = "@Html.Toyota().Page.HomeUrl";
                            } else {
                                say('Incorrect Username and/or password.').with("yell").to("#feedback");
                            }
                        },
                    error:
                        function (x, t, e) {
                            say('Incorrect Username and/or password.').with("yell").to("#feedback");
                        },
                    complete:
                        function (x, t, e) {
                            $("#login-button").prop('disabled', false);
                        }
                });

            }

            jQuery(function ($) {
                $(document).on('click', '.toolbar a[data-target]', function (e) {
                    e.preventDefault();
                    var target = $(this).data('target');
                    $('.widget-box.visible').removeClass('visible'); //hide others
                    $(target).addClass('visible'); //show target
                });
            });

            jQuery(function ($) {
                $(document).on("keydown", "#tfUsername", function (e) {
                    $("#feedback").html("&nbsp;");
                });
            });

            function say(s) {
                var pesan = s;
                var $this = this;
                $this.with = function(tone) {
                    pesan = '<span class="' + tone + '">' + s + '</span>';
                    return $this;
                }

                $this.to = function (id) {
                    $(id).html(pesan);
                }

                return $this;
            }

            $("#login-form").submit(function (e) {
                e.preventDefault();

                var tfu = $('#tfUsername').val();
                var tfp = $('#tfPassword').val();
                var pesan = 'Incorrect Username and/or password.';
                if (tfu.length > 1 && tfp.length < 1) {
                    say(pesan).with("yell").to("#feedback");
                    $('#tfPassword').focus();
                    return false;
                }
                else if (tfu.length < 1 && tfp.length > 0) {
                    say(pesan).with("yell").to("#feedback");
                    $('#tfUsername').focus();
                    return false;
                }
                else if (tfu.length < 1 || tfp.length < 1) {
                    say(pesan).with("yell").to("#feedback");
                    $('#tfUsername').focus();
                    return false;
                }

                say('Please Wait ...').with("tell").to("#feedback");
                $("#login-button").prop('disabled', true);
                $.ajax({
                    method: "POST",
                    url: "@Html.Toyota().Page.AjaxLoginActionUrl",
                    data:
                    {
                        username: tfu,
                        password: tfp
                    },
                    success:
                        function (feedback) {
                            if (feedback == "true") {
                                say('Redirecting to Homepage.').with("done").to("#feedback");
                                $('#login-button').hide();
                                window.location.href = "@Html.Toyota().Page.HomeUrl";
                            } else {
                                say('Incorrect Username and/or password.').with("yell").to("#feedback");
                            }
                        },
                    error:
                        function (x, t, e) {
                            say('Incorrect Username and/or password.').with("yell").to("#feedback");
                        },
                    complete :
                        function (x, t, e) {
                            $("#login-button").prop('disabled', false);
                        }
                });
            });

            @*jQuery(function ($) {
		        $(document).on('click', '.toolbar a[data-target]', function (e) {
		            e.preventDefault();
		            var target = $(this).data('target');
		            $('.widget-box.visible').removeClass('visible'); //hide others
		            $(target).addClass('visible'); //show target
		        });
		    });*@


		    //you don't need this, just used for changing background
		    /*jQuery(function ($) {
		        $('#btn-login-dark').on('click', function (e) {
		            setCookie('login_skin', 'login-layout');
		            $('body').attr('class', 'login-layout');
		            $('#id-text2').attr('class', 'white');
		            $('#id-company-text').attr('class', 'blue');

		            e.preventDefault();
		        });

		        $('#btn-login-light').on('click', function (e) {
		            setCookie('login_skin', 'light-login');
		            $('body').attr('class', 'login-layout light-login');
		            $('#id-text2').attr('class', 'grey');
		            $('#id-company-text').attr('class', 'blue');

		            e.preventDefault();
		        });

		        $('#btn-login-blur').on('click', function (e) {
		            setCookie('login_skin', 'blur-login');
		            $('body').attr('class', 'login-layout blur-login');
		            $('#id-text2').attr('class', 'white');
		            $('#id-company-text').attr('class', 'light-blue');

		            e.preventDefault();
		        });

		    });*/

		    @*$("#link-agreement").click(function () {
		        $("#agreement-popup").modal();
		    });

		    /** Skin layout **/
		    function setCookie(cname, cvalue) {
		        document.cookie = cname + '=' + cvalue;
		    }
            
		    function getCookie(cname) {
		        var name = cname + "=";
		        var ca = document.cookie.split(';');
		        for (var i = 0; i < ca.length; i++) {
		            var c = ca[i];
		            while (c.charAt(0) == ' ') c = c.substring(1);
		            if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
		        }
		        return "";
		    }

		    //---=== Cookie reader
		    /*var bodySkin = getCookie("login_skin");

		    switch (bodySkin) {
		        case 'login-layout': $('body').attr('class', 'login-layout');
		            $('#id-text2').attr('class', 'white');
		            $('#id-company-text').attr('class', 'blue');
		            break;
		        case 'light-login': $('body').attr('class', 'login-layout light-login');
		            $('#id-text2').attr('class', 'grey');
		            $('#id-company-text').attr('class', 'blue');
		            break;
		        case 'blur-login': $('body').attr('class', 'login-layout blur-login');
		            $('#id-text2').attr('class', 'white');
		            $('#id-company-text').attr('class', 'light-blue');
		            break;
		        default:
		            $('body').attr('class', 'login-layout');
		            $('#id-text2').attr('class', 'white');
		            $('#id-company-text').attr('class', 'blue');
		            break;
		    }
		    //---=== End cookie reader

			*/
		    //add by septareosagita@gmail.com
            //==================================
		    $("#btnlogin").click(function () {
		        Callajaxlogin();
		    });



		    $("#txtusername").val($.cookie("username"))
		    $("#txtpassword").val($.cookie("password"))
		    $("#rememberme").prop("checked", $.cookie("checked"));


		    function onEnter(e) {
		        var key = e.keyCode || e.which;
		        if (key == 13) {
		            Callajaxlogin();
		        }
		    }

		    function Callajaxlogin() {
		        if ($("#rememberme").is(":checked")) {
		            $.cookie("username", $("#txtusername").val());
		            $.cookie("password", $("#txtpassword").val());
		            $.cookie("checked", true);
		        }
		        $.ajax({
		            method: "post",
		            url: "@Html.Toyota().Page.AjaxLoginActionUrl",
		            data: {
		                username: $("#txtusername").val(),
		                password: $("#txtpassword").val()
		            },
		            beforeSend:
                    function () {
                        $('#btnlogin').button('loading');
                    },
		            success: function (data) {
		                if (data == 'false') {
		                    getLoginMessage(false);
		                } else {
		                    $('#lblmsg').attr('style', 'visibility:;position:relative;');
		                    $('#btnlogin').attr('style', 'visibility:hidden;position:absolute;');
		                    window.location.href = "@Html.Toyota().Page.HomeUrl";
		                }
		            },
		            complete:
                    function () {
                        $('#btnlogin').button('reset');
                    }
		        });
		    }

            function getLoginMessage()
            {
                $.ajax({
                    type: "POST",
                    url: "@Html.Toyota().Page.GetActionUrl("getLoginMessage")",
                    beforeSend:function () {$('#btnlogin').button('loading');},
                    success: function (result) { 
                            msgError(result);  
                    },
                    complete:function () {$('#btnlogin').button('reset');}
                });
            }*@
            //==================================
		</script>
	</body>
</html>
